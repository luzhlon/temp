<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <link rel="stylesheet" href="themes/default/easyui.css">
    <link rel="stylesheet" href="themes/icon.css">
    <link rel="stylesheet" href="css/autocomplete.css">
    <script src="js/jquery.js"></script>
    <script src="js/jquery.easyui.min.js"></script>
    <script src="script/autocomplete.js"></script>
</head>
<body>
<input type="button" onclick="onEdit()" value="Edit" accesskey="b">
<input type="button" onclick="onEnd()" value="End" accesskey="e">

<table class="easyui-datagrid" title="Basic DataGrid" style="width:100%;height:500px"
       data-options="singleSelect:true,collapsible:true,url:'/output?method=book',method:'get'">
    <thead>
    <tr>
        <th data-options="field:'id',width:80">BookID</th>
        <th data-options="field:'name',width:100,editor:{type:'text'}">BookName</th>
        <th data-options="field:'author',width:80,align:'right',editor:{type:'text'}">Author</th>
        <th data-options="field:'dynasty',width:80,align:'right',editor:{type:'text'}">Dynasty</th>
    </tr>
    </thead>
</table>
<script>
    g_dg = $('table.easyui-datagrid');
    g_editIndex = undefined;
    g_dg.datagrid({
        onClickRow : function(index, field) {
            if(g_editIndex != undefined)
                g_dg.datagrid('endEdit', g_editIndex);
        }
    });

    function onEdit() {
        var index = g_dg.datagrid('getRowIndex',
                g_dg.datagrid('getSelected'));
        g_dg.datagrid('beginEdit', index);
        g_editIndex = index;
    }
    function onEnd() {
        g_dg.datagrid('endEdit', g_editIndex);
    }
</script>
</body>
</html>